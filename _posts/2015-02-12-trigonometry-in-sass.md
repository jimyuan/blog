---
layout: post
title:  在Sass中实现三角函数计算
tags: Sass CSS
---

这是由一个瞎折腾的事件引发的，起因是这样的， 我想在web里画一个等边三角形，当然做法有好几种，canvas、svg、css…… 都可以，我在比较哪种方法更对我的路，当然是纯css代码搞定就很好，查了好多资料，其中最通常的就是用块对象的大粗边，这种做法已经不稀奇了，例如下面的例子：

<!--more-->

{% highlight css %}
.triangle{
  width: 0; height: 0;
  border-width: 50px;
  border-style: solid;
  border-color: blue red yellow black;
}
{% endhighlight %}

做出来就下面那样，要哪个角度，就将其他的颜色设成transparent就行了。
<div style="width: 0; height: 0;border-width: 50px; border-style: solid; border-color: blue red yellow black;"></div>

当然，在CSS3中还有种新的方法叫`clip-path`的，可以绘制多边形，用法非常灵活，但是去了[caniuse](http://caniuse.com/#search=clip-path)网站查了下，支持度貌似还很不够，不过是个不错的方法，例如下面的代码：
{% highlight css %}
.polygon {
  width: 100px;
  height: 100px;
  background: #f00;
  -webkit-clip-path:polygon(50px 0, 100px 37px, 82px 100px, 19px 100px, 0 37px);
}
{% endhighlight %}

（在查阅文档的过程中，一个CSS3的新属性`shape-outside`也蛮有意思的，这个以后再说……）

看到下面的五边形了吗？没有？那你的浏览器蛮渣的，呵呵~~
<div style="width: 100px; height: 100px; background: #f00; -webkit-clip-path:polygon(50px 0, 100px 37px, 82px 100px, 19px 100px, 0 37px);"></div>

当然，这个等边五边形五个顶点的坐标为啥是这些数字，拜托，就是用三角函数算出来的，这不，咱快切入正题了…………

下面来道中学数学题：等边三角形高为y，求边长是多少？

用js的语法来表达，边长的长度`x = Math.tan(30 * Math.PI / 180) * y * 2`( JS里三角函数用的是弧度，要把角度转换一下才能计算 ), 问题解决了，我用该方法根据给定的高度，就能算出在一个矩形里用polygon画等边三角形路径时3个点得坐标了：`polygon(0.5x 0, x y, 0 y)`, y给定后，x的值通过以上方法就可以得出啦！

其实这么简单的事情，是不值得太高兴的，问题来了，如果我想在[Sass](http://sass-lang.com/)中要将这个东西封装一下，写一个mixin，传入高度，立刻给我生成一个等边三角形的CSS代码，那就省力了吧，嘿嘿，实现不了！

原因很简单，在Sass中，能够进行简单的加减乘除四则运算，但是没有内建的类似JS的`Math.sin()`或`Math.cos()`等三角函数的计算方法，傻眼了吧，没有三角函数，就没法做上面的事儿啊！

#### 数值方法 (NUMERICAL METHODS)
问题总是可以解决的，但是我的大部分数学知识早就灰飞烟灭了，如果你掌握了那啥[数值分析](http://zh.wikipedia.org/wiki/数值分析), 那啥[CORDIC算法](http://en.wikipedia.org/wiki/Cordic)，那啥[Chebyshev多项式](http://en.wikipedia.org/wiki/Chebyshev_polynomial)，或者那啥[极值逼近算法](http://en.wikipedia.org/wiki/Remez_algorithm)，这就不是问题啦！天哪，我在上面写了点啥？所以啊，我复制、粘贴了[Taylor展开式](http://en.wikipedia.org/wiki/Taylor_series)来实现咱们的`sin()`或者`cos()`计算：

<figure class="equation"><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-1-Frame" style=""><nobr><span class="math" id="MathJax-Span-288" role="math" style="width: 22.608em; display: inline-block;"><span style="display: inline-block; position: relative; width: 20.172em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(-1.094em, 1000.002em, 5.237em, -999.998em); top: -2.311em; left: 0.002em;"><span class="mrow" id="MathJax-Span-289"><span class="mtable" id="MathJax-Span-290" style="padding-right: 0.164em; padding-left: 0.164em;"><span style="display: inline-block; position: relative; width: 19.807em; height: 0px;"><span style="position: absolute; clip: rect(2.437em, 1000.002em, 6.577em, -999.998em); top: -4.909em; left: 0.002em;"><span style="display: inline-block; position: relative; width: 1.991em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.142em, -999.998em); top: -5.68em; right: 0.002em;"><span class="mtd" id="MathJax-Span-291"><span class="mrow" id="MathJax-Span-292"><span class="mi" id="MathJax-Span-293" style="font-family: STIXGeneral-Regular;">sin</span><span class="mo" id="MathJax-Span-294"></span><span class="mi" id="MathJax-Span-295" style="font-family: STIXGeneral-Italic; padding-left: 0.205em;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -2.474em; right: 0.002em;"><span class="mtd" id="MathJax-Span-368"><span class="mrow" id="MathJax-Span-369"><span class="mi" id="MathJax-Span-370" style="font-family: STIXGeneral-Regular;">cos</span><span class="mo" id="MathJax-Span-371"></span><span class="mi" id="MathJax-Span-372" style="font-family: STIXGeneral-Italic; padding-left: 0.205em;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.913em;"></span></span><span style="position: absolute; clip: rect(3.655em, 1000.002em, 9.986em, -999.998em); top: -7.06em; left: 1.991em;"><span style="display: inline-block; position: relative; width: 17.819em; height: 0px;"><span style="position: absolute; clip: rect(2.275em, 1000.002em, 5.4em, -999.998em); top: -5.68em; left: 0.002em;"><span class="mtd" id="MathJax-Span-296"><span class="mrow" id="MathJax-Span-297"><span class="mi" id="MathJax-Span-298"></span><span class="mo" id="MathJax-Span-299" style="font-family: STIXGeneral-Regular; padding-left: 0.327em;">=</span><span class="munderover" id="MathJax-Span-300" style="padding-left: 0.327em;"><span style="display: inline-block; position: relative; width: 1.301em; height: 0px;"><span style="position: absolute; clip: rect(2.924em, 1000.002em, 4.629em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mo" id="MathJax-Span-301" style="font-family: STIXSizeOneSym; vertical-align: -0.526em;">∑</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.411em, 1000.002em, 4.263em, -999.998em); top: -2.879em; left: 0.043em;"><span class="texatom" id="MathJax-Span-302"><span class="mrow" id="MathJax-Span-303"><span class="mi" id="MathJax-Span-304" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-305" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-306" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.492em, 1000.002em, 4.142em, -999.998em); top: -5.233em; left: 0.327em;"><span class="texatom" id="MathJax-Span-307"><span class="mrow" id="MathJax-Span-308"><span class="mi" id="MathJax-Span-309" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="texatom" id="MathJax-Span-310" style="padding-left: 0.205em;"><span class="mrow" id="MathJax-Span-311"><span class="mfrac" id="MathJax-Span-312"><span style="display: inline-block; position: relative; width: 3.817em; height: 0px; margin-right: 0.124em; margin-left: 0.124em;"><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.304em, -999.998em); top: -4.706em; left: 50%; margin-left: -1.134em;"><span class="mrow" id="MathJax-Span-313"><span class="mo" id="MathJax-Span-314" style="font-family: STIXGeneral-Regular;">(</span><span class="mo" id="MathJax-Span-315" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-316" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-317"><span style="display: inline-block; position: relative; width: 0.773em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.304em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mo" id="MathJax-Span-318" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.381em; left: 0.327em;"><span class="texatom" id="MathJax-Span-319"><span class="mrow" id="MathJax-Span-320"><span class="mi" id="MathJax-Span-321" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.304em, -999.998em); top: -3.326em; left: 50%; margin-left: -1.824em;"><span class="mrow" id="MathJax-Span-322"><span class="mo" id="MathJax-Span-323" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-324" style="font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-325" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-326" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">+</span><span class="mn" id="MathJax-Span-327" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">1</span><span class="mo" id="MathJax-Span-328" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-329" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.895em, 1000.002em, 1.179em, -999.998em); top: -1.256em; left: 0.002em;"><span style="border-left-width: 3.817em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.043em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.057em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-330"><span style="display: inline-block; position: relative; width: 2.112em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-331" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.422em; left: 0.489em;"><span class="texatom" id="MathJax-Span-332"><span class="mrow" id="MathJax-Span-333"><span class="texatom" id="MathJax-Span-334"><span class="mrow" id="MathJax-Span-335"><span class="mn" id="MathJax-Span-336" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-337" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-338" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">+</span><span class="mn" id="MathJax-Span-339" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-340" style="font-family: STIXGeneral-Regular; padding-left: 0.327em;">=</span><span class="mi" id="MathJax-Span-341" style="font-family: STIXGeneral-Italic; padding-left: 0.327em;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mo" id="MathJax-Span-342" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">−</span><span class="texatom" id="MathJax-Span-343" style="padding-left: 0.246em;"><span class="mrow" id="MathJax-Span-344"><span class="mfrac" id="MathJax-Span-345"><span style="display: inline-block; position: relative; width: 1.057em; height: 0px; margin-right: 0.124em; margin-left: 0.124em;"><span style="position: absolute; clip: rect(3.046em, 1000.002em, 4.142em, -999.998em); top: -4.706em; left: 50%; margin-left: -0.444em;"><span class="msubsup" id="MathJax-Span-346"><span style="display: inline-block; position: relative; width: 0.935em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-347" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.381em; left: 0.489em;"><span class="texatom" id="MathJax-Span-348"><span class="mrow" id="MathJax-Span-349"><span class="mn" id="MathJax-Span-350" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">3</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.142em, -999.998em); top: -3.326em; left: 50%; margin-left: -0.404em;"><span class="mrow" id="MathJax-Span-351"><span class="mn" id="MathJax-Span-352" style="font-family: STIXGeneral-Regular;">3</span><span class="mo" id="MathJax-Span-353" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.895em, 1000.002em, 1.179em, -999.998em); top: -1.256em; left: 0.002em;"><span style="border-left-width: 1.057em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.043em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.057em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-354" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">+</span><span class="texatom" id="MathJax-Span-355" style="padding-left: 0.246em;"><span class="mrow" id="MathJax-Span-356"><span class="mfrac" id="MathJax-Span-357"><span style="display: inline-block; position: relative; width: 1.057em; height: 0px; margin-right: 0.124em; margin-left: 0.124em;"><span style="position: absolute; clip: rect(3.046em, 1000.002em, 4.142em, -999.998em); top: -4.706em; left: 50%; margin-left: -0.444em;"><span class="msubsup" id="MathJax-Span-358"><span style="display: inline-block; position: relative; width: 0.935em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-359" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.381em; left: 0.489em;"><span class="texatom" id="MathJax-Span-360"><span class="mrow" id="MathJax-Span-361"><span class="mn" id="MathJax-Span-362" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">5</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.142em, -999.998em); top: -3.326em; left: 50%; margin-left: -0.404em;"><span class="mrow" id="MathJax-Span-363"><span class="mn" id="MathJax-Span-364" style="font-family: STIXGeneral-Regular;">5</span><span class="mo" id="MathJax-Span-365" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.895em, 1000.002em, 1.179em, -999.998em); top: -1.256em; left: 0.002em;"><span style="border-left-width: 1.057em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.043em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.057em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-366" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">−</span><span class="mo" id="MathJax-Span-367" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">⋯</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(2.275em, 1000.002em, 5.4em, -999.998em); top: -2.474em; left: 0.002em;"><span class="mtd" id="MathJax-Span-373"><span class="mrow" id="MathJax-Span-374"><span class="mi" id="MathJax-Span-375"></span><span class="mo" id="MathJax-Span-376" style="font-family: STIXGeneral-Regular; padding-left: 0.327em;">=</span><span class="munderover" id="MathJax-Span-377" style="padding-left: 0.327em;"><span style="display: inline-block; position: relative; width: 1.301em; height: 0px;"><span style="position: absolute; clip: rect(2.924em, 1000.002em, 4.629em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mo" id="MathJax-Span-378" style="font-family: STIXSizeOneSym; vertical-align: -0.526em;">∑</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.411em, 1000.002em, 4.263em, -999.998em); top: -2.879em; left: 0.043em;"><span class="texatom" id="MathJax-Span-379"><span class="mrow" id="MathJax-Span-380"><span class="mi" id="MathJax-Span-381" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-382" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-383" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.492em, 1000.002em, 4.142em, -999.998em); top: -5.233em; left: 0.327em;"><span class="texatom" id="MathJax-Span-384"><span class="mrow" id="MathJax-Span-385"><span class="mi" id="MathJax-Span-386" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∞</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="texatom" id="MathJax-Span-387" style="padding-left: 0.205em;"><span class="mrow" id="MathJax-Span-388"><span class="mfrac" id="MathJax-Span-389"><span style="display: inline-block; position: relative; width: 2.397em; height: 0px; margin-right: 0.124em; margin-left: 0.124em;"><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.304em, -999.998em); top: -4.706em; left: 50%; margin-left: -1.134em;"><span class="mrow" id="MathJax-Span-390"><span class="mo" id="MathJax-Span-391" style="font-family: STIXGeneral-Regular;">(</span><span class="mo" id="MathJax-Span-392" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-393" style="font-family: STIXGeneral-Regular;">1</span><span class="msubsup" id="MathJax-Span-394"><span style="display: inline-block; position: relative; width: 0.773em; height: 0px;"><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.304em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mo" id="MathJax-Span-395" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.381em; left: 0.327em;"><span class="texatom" id="MathJax-Span-396"><span class="mrow" id="MathJax-Span-397"><span class="mi" id="MathJax-Span-398" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.304em, -999.998em); top: -3.326em; left: 50%; margin-left: -1.013em;"><span class="mrow" id="MathJax-Span-399"><span class="mo" id="MathJax-Span-400" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-401" style="font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-402" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-403" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-404" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.895em, 1000.002em, 1.179em, -999.998em); top: -1.256em; left: 0.002em;"><span style="border-left-width: 2.397em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.043em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.057em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-405"><span style="display: inline-block; position: relative; width: 1.301em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-406" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.422em; left: 0.489em;"><span class="texatom" id="MathJax-Span-407"><span class="mrow" id="MathJax-Span-408"><span class="texatom" id="MathJax-Span-409"><span class="mrow" id="MathJax-Span-410"><span class="mn" id="MathJax-Span-411" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span class="mi" id="MathJax-Span-412" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-413" style="font-family: STIXGeneral-Regular; padding-left: 0.327em;">=</span><span class="mn" id="MathJax-Span-414" style="font-family: STIXGeneral-Regular; padding-left: 0.327em;">1</span><span class="mo" id="MathJax-Span-415" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">−</span><span class="texatom" id="MathJax-Span-416" style="padding-left: 0.246em;"><span class="mrow" id="MathJax-Span-417"><span class="mfrac" id="MathJax-Span-418"><span style="display: inline-block; position: relative; width: 1.057em; height: 0px; margin-right: 0.124em; margin-left: 0.124em;"><span style="position: absolute; clip: rect(3.046em, 1000.002em, 4.142em, -999.998em); top: -4.706em; left: 50%; margin-left: -0.444em;"><span class="msubsup" id="MathJax-Span-419"><span style="display: inline-block; position: relative; width: 0.935em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-420" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.381em; left: 0.489em;"><span class="texatom" id="MathJax-Span-421"><span class="mrow" id="MathJax-Span-422"><span class="mn" id="MathJax-Span-423" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.142em, -999.998em); top: -3.326em; left: 50%; margin-left: -0.404em;"><span class="mrow" id="MathJax-Span-424"><span class="mn" id="MathJax-Span-425" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-426" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.895em, 1000.002em, 1.179em, -999.998em); top: -1.256em; left: 0.002em;"><span style="border-left-width: 1.057em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.043em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.057em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-427" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">+</span><span class="texatom" id="MathJax-Span-428" style="padding-left: 0.246em;"><span class="mrow" id="MathJax-Span-429"><span class="mfrac" id="MathJax-Span-430"><span style="display: inline-block; position: relative; width: 1.057em; height: 0px; margin-right: 0.124em; margin-left: 0.124em;"><span style="position: absolute; clip: rect(3.046em, 1000.002em, 4.142em, -999.998em); top: -4.706em; left: 50%; margin-left: -0.444em;"><span class="msubsup" id="MathJax-Span-431"><span style="display: inline-block; position: relative; width: 0.935em; height: 0px;"><span style="position: absolute; clip: rect(3.452em, 1000.002em, 4.142em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-432" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.381em; left: 0.489em;"><span class="texatom" id="MathJax-Span-433"><span class="mrow" id="MathJax-Span-434"><span class="mn" id="MathJax-Span-435" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">4</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.208em, 1000.002em, 4.142em, -999.998em); top: -3.326em; left: 50%; margin-left: -0.404em;"><span class="mrow" id="MathJax-Span-436"><span class="mn" id="MathJax-Span-437" style="font-family: STIXGeneral-Regular;">4</span><span class="mo" id="MathJax-Span-438" style="font-family: STIXGeneral-Regular;">!</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.895em, 1000.002em, 1.179em, -999.998em); top: -1.256em; left: 0.002em;"><span style="border-left-width: 1.057em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.043em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.057em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-439" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">−</span><span class="mo" id="MathJax-Span-440" style="font-family: STIXGeneral-Regular; padding-left: 0.246em;">⋯</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.064em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.315em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 6.866em; vertical-align: -3.18em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-1"> \begin{aligned} \sin x & = \sum _{n=0}^{\infty}{\frac {(-1)^{n}}{(2n+1)!}}x^{{2n+1}} = x - {\frac {x^{3}}{3!}} + {\frac {x^{5}}{5!}} - \cdots \\ \cos x & = \sum _{n=0}^{\infty}{\frac {(-1)^{n}}{(2n)!}}x^{{2n}} = 1 - {\frac {x^{2}}{2!}} + {\frac {x^{4}}{4!}} - \cdots \end{aligned} </script></figure>

哦，天那，上面又是啥玩意儿？习惯一下，随便看两眼…… 不管如何，我们要依靠上面的算法来解决问题啊亲！所以我们需要把以上的算法翻译成Sass能认的语法。

#### 乘方 (POWER)
上面的[Taylor展开式](http://en.wikipedia.org/wiki/Taylor_series)中，我们需要对x<sup>2n+1</sup>和x<sup>2n</sup>进行展开操作，但是在现有的Sass中没有这种运算方法，所以我们先先写个_power function_:
<figure class="equation"><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-4-Frame" style=""><nobr><span class="math" id="MathJax-Span-176" role="math" style="width: 8.596em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.666em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(-1.151em, 1000.002em, 5.21em, -999.998em); top: -2.267em; left: 0.002em;"><span class="mrow" id="MathJax-Span-177"><span class="mtable" id="MathJax-Span-178" style="padding-right: 0.151em; padding-left: 0.151em;"><span style="display: inline-block; position: relative; width: 7.331em; height: 0px;"><span style="position: absolute; clip: rect(1.899em, 1000.002em, 4.727em, -999.998em); top: -4.016em; left: 0.002em;"><span style="display: inline-block; position: relative; width: 1.416em; height: 0px;"><span style="position: absolute; clip: rect(3.201em, 1000.002em, 4.131em, -999.998em); top: -5.318em; right: 0.002em;"><span class="mtd" id="MathJax-Span-179"><span class="mrow" id="MathJax-Span-180"><span class="msubsup" id="MathJax-Span-181"><span style="display: inline-block; position: relative; width: 0.932em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.131em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-182" style="font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.485em;"><span class="texatom" id="MathJax-Span-183"><span class="mrow" id="MathJax-Span-184"><span class="mi" id="MathJax-Span-185" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.201em, 1000.002em, 4.131em, -999.998em); top: -3.421em; right: 0.002em;"><span class="mtd" id="MathJax-Span-206"><span class="mrow" id="MathJax-Span-207"><span class="msubsup" id="MathJax-Span-208"><span style="display: inline-block; position: relative; width: 1.416em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.131em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mi" id="MathJax-Span-209" style="font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.425em; left: 0.485em;"><span class="texatom" id="MathJax-Span-210"><span class="mrow" id="MathJax-Span-211"><span class="mo" id="MathJax-Span-212" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span class="mi" id="MathJax-Span-213" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.722em, 1000.002em, 10.084em, -999.998em); top: -7.141em; left: 1.416em;"><span style="display: inline-block; position: relative; width: 5.917em; height: 0px;"><span style="position: absolute; clip: rect(1.899em, 1000.002em, 4.169em, -999.998em); top: -5.318em; left: 0.002em;"><span class="mtd" id="MathJax-Span-186"><span class="mrow" id="MathJax-Span-187"><span class="mi" id="MathJax-Span-188"></span><span class="mo" id="MathJax-Span-189" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">=</span><span class="texatom" id="MathJax-Span-190" style="padding-left: 0.299em;"><span class="mrow" id="MathJax-Span-191"><span class="munderover" id="MathJax-Span-192"><span style="display: inline-block; position: relative; width: 4.28em; height: 0px;"><span style="position: absolute; clip: rect(2.532em, 1000.002em, 4.169em, -999.998em); top: -4.016em; left: 0.002em;"><span class="texatom" id="MathJax-Span-193"><span class="mrow" id="MathJax-Span-194"><span class="munderover" id="MathJax-Span-195"><span style="display: inline-block; position: relative; width: 4.28em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.169em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mrow" id="MathJax-Span-196"><span class="mi" id="MathJax-Span-197" style="font-family: STIXGeneral-Italic;">b</span><span class="mo" id="MathJax-Span-198" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">×</span><span class="mo" id="MathJax-Span-199" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">⋯</span><span class="mo" id="MathJax-Span-200" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">×</span><span class="mi" id="MathJax-Span-201" style="font-family: STIXGeneral-Italic; padding-left: 0.262em;">b</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.052em, 1000.002em, 3.759em, -999.998em); top: -4.5em; left: 0.002em;"><span class="mo" id="MathJax-Span-202" style=""><span style="display: inline-block; position: relative; width: 4.28em; height: 0px;"><span style="position: absolute; top: -4.016em; left: 0.002em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 3.61em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 1.49em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 0.523em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 0.82em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 1.155em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 2.643em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 2.978em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -4.016em; left: 3.313em;"><span style="font-size: 70.7%; font-family: STIXNonUnicode-Regular;"></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.499em, 1000.002em, 4.131em, -999.998em); top: -5.616em; left: 1.974em;"><span class="texatom" id="MathJax-Span-203"><span class="mrow" id="MathJax-Span-204"><span class="mi" id="MathJax-Span-205" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.127em, 1000.002em, 6.922em, -999.998em); top: -3.979em; left: 0.002em;"><span class="mtd" id="MathJax-Span-214"><span class="mrow" id="MathJax-Span-215"><span class="mi" id="MathJax-Span-216"></span><span class="mo" id="MathJax-Span-217" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">=</span><span class="texatom" id="MathJax-Span-218" style="padding-left: 0.299em;"><span class="mrow" id="MathJax-Span-219"><span class="mfrac" id="MathJax-Span-220"><span style="display: inline-block; position: relative; width: 4.392em; height: 0px; margin-right: 0.113em; margin-left: 0.113em;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.131em, -999.998em); top: -4.686em; left: 50%; margin-left: -0.259em;"><span class="mn" id="MathJax-Span-221" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.238em, 1000.002em, 5.657em, -999.998em); top: -3.346em; left: 50%; margin-left: -2.119em;"><span class="munderover" id="MathJax-Span-222"><span style="display: inline-block; position: relative; width: 4.28em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.95em, -999.998em); top: -4.016em; left: 0.002em;"><span class="texatom" id="MathJax-Span-223"><span class="mrow" id="MathJax-Span-224"><span class="munderover" id="MathJax-Span-225"><span style="display: inline-block; position: relative; width: 4.28em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.169em, -999.998em); top: -4.016em; left: 0.002em;"><span class="mrow" id="MathJax-Span-226"><span class="mi" id="MathJax-Span-227" style="font-family: STIXGeneral-Italic;">b</span><span class="mo" id="MathJax-Span-228" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">×</span><span class="mo" id="MathJax-Span-229" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">⋯</span><span class="mo" id="MathJax-Span-230" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">×</span><span class="mi" id="MathJax-Span-231" style="font-family: STIXGeneral-Italic; padding-left: 0.262em;">b</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.722em, 1000.002em, 4.652em, -999.998em); top: -3.718em; left: 0.002em;"><span class="mo" id="MathJax-Span-232" style=""><span style="display: inline-block; position: relative; width: 4.28em; height: 0px;"><span style="position: absolute; font-family: STIXNonUnicode-Regular; top: -4.016em; left: 0.039em;"><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; font-family: STIXNonUnicode-Regular; top: -4.016em; left: 3.35em;"><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; font-family: STIXNonUnicode-Regular; top: -4.016em; left: 1.192em;"><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="font-family: STIXNonUnicode-Regular; position: absolute; top: -4.016em; left: 0.746em;"><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="font-family: STIXNonUnicode-Regular; position: absolute; top: -4.016em; left: 2.866em;"><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.61em, 1000.002em, 4.243em, -999.998em); top: -2.565em; left: 1.974em;"><span class="texatom" id="MathJax-Span-233"><span class="mrow" id="MathJax-Span-234"><span class="mi" id="MathJax-Span-235" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.858em, 1000.002em, 1.155em, -999.998em); top: -1.263em; left: 0.002em;"><span style="border-left-width: 4.392em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.076em; vertical-align: 0.002em;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.578em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.145em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.271em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 6.96em; vertical-align: -3.206em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-4"> \begin{aligned} b^{n} & = {\overbrace {b \times \cdots \times b}^{n}} \\ b^{-n} & = {\frac {1}{\underbrace {b \times \cdots \times b}_{n}}} \end{aligned} </script></figure>

将“火星语”翻译成Sass能理解的语法：
{% highlight scss %}
@function pow($number, $exp) {
  $value: 1;
  @if $exp > 0 {
    @for $i from 1 through $exp {
      $value: $value * $number;
    }
  }
  @else if $exp < 0 {
    @for $i from 1 through -$exp {
      $value: $value / $number;
    }
  }
  @return $value;
}
{% endhighlight %}

#### 阶乘 (FACTORIAL)
表达式(2n+1)!和(2n)!需要一个阶乘算法的函数，不过这要比上面简单的多：
<figure class="equation"><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-7-Frame" style=""><nobr><span class="math" id="MathJax-Span-252" role="math" style="width: 13.878em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.39em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(2.271em, 1000.002em, 4.727em, -999.998em); top: -3.756em; left: 0.002em;"><span class="mrow" id="MathJax-Span-253"><span class="mi" id="MathJax-Span-254" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-255" style="font-family: STIXGeneral-Regular;">!</span><span class="mo" id="MathJax-Span-256" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">=</span><span class="texatom" id="MathJax-Span-257" style="padding-left: 0.299em;"><span class="mrow" id="MathJax-Span-258"><span class="mrow" id="MathJax-Span-259"><span class="mo" id="MathJax-Span-260" style="vertical-align: -0.445em;"><span><span style="font-size: 111%; font-family: STIXSizeTwoSym;">{</span></span></span><span class="mtable" id="MathJax-Span-261" style="padding-right: 0.151em; padding-left: 0.151em;"><span style="display: inline-block; position: relative; width: 9.154em; height: 0px;"><span style="position: absolute; clip: rect(2.68em, 1000.002em, 4.987em, -999.998em); top: -4.016em; left: 0.002em;"><span style="display: inline-block; position: relative; width: 4.875em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.131em, -999.998em); top: -4.574em; left: 0.002em;"><span class="mtd" id="MathJax-Span-262"><span class="mrow" id="MathJax-Span-263"><span class="mn" id="MathJax-Span-264" style="font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.317em, -999.998em); top: -3.346em; left: 0.002em;"><span class="mtd" id="MathJax-Span-271"><span class="mrow" id="MathJax-Span-272"><span class="mo" id="MathJax-Span-273" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-274" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-275" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">−</span><span class="mn" id="MathJax-Span-276" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">1</span><span class="mo" id="MathJax-Span-277" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-278" style="font-family: STIXGeneral-Regular;">!</span><span class="mo" id="MathJax-Span-279" style="font-family: STIXGeneral-Regular; padding-left: 0.262em;">×</span><span class="mi" id="MathJax-Span-280" style="font-family: STIXGeneral-Italic; padding-left: 0.262em;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(2.68em, 1000.002em, 4.801em, -999.998em); top: -4.016em; left: 5.991em;"><span style="display: inline-block; position: relative; width: 3.164em; height: 0px;"><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.131em, -999.998em); top: -4.574em; left: 0.002em;"><span class="mtd" id="MathJax-Span-265"><span class="mrow" id="MathJax-Span-266"><span class="mtext" id="MathJax-Span-267" style="font-family: STIXGeneral-Regular;">if&nbsp;</span><span class="mi" id="MathJax-Span-268" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-269" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">=</span><span class="mn" id="MathJax-Span-270" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">0</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.238em, 1000.002em, 4.169em, -999.998em); top: -3.346em; left: 0.002em;"><span class="mtd" id="MathJax-Span-281"><span class="mrow" id="MathJax-Span-282"><span class="mtext" id="MathJax-Span-283" style="font-family: STIXGeneral-Regular;">if&nbsp;</span><span class="mi" id="MathJax-Span-284" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-285" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">&gt;</span><span class="mn" id="MathJax-Span-286" style="font-family: STIXGeneral-Regular; padding-left: 0.299em;">0</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-287"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.759em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 2.585em; vertical-align: -0.998em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-7"> n! = { \begin{cases} 1 & \text{if } n = 0 \\ (n-1)! \times n & \text{if } n > 0 \end{cases} } </script></figure>

同样，将算法转换成Sass的语法：
{% highlight scss %}
@function fact($number) {
  $value: 1;
  @if $number > 0 {
    @for $i from 1 through $number {
      $value: $value * $i;
    }
  }
  @return $value;
}
{% endhighlight %}

#### 正弦、余弦和正切 (SINES, COSINES AND TANGENTS)
现在，必要的算法工具已准备妥当，可以创建我们的三角函数算法了，让我们跟随着[Taylor展开式](http://en.wikipedia.org/wiki/Taylor_series)的脚步，奔跑吧，兄弟！
{% highlight scss %}
@function pi() {
  @return 3.14159265359;
}

@function rad($angle) {
  $unit: unit($angle);
  $unitless: $angle / ($angle * 0 + 1);
  // If the angle has 'deg' as unit, convert to radians.
  @if $unit == deg {
    $unitless: $unitless / 180 * pi();
  }
  @return $unitless;
}

@function sin($angle) {
  $sin: 0;
  $angle: rad($angle);
  // Iterate a bunch of times.
  @for $i from 0 through 10 {
    $sin: $sin + pow(-1, $i) * pow($angle, (2 * $i + 1)) / fact(2 * $i + 1);
  }
  @return $sin;
}

@function cos($angle) {
  $cos: 0;
  $angle: rad($angle);
  // Iterate a bunch of times.
  @for $i from 0 through 10 {
    $cos: $cos + pow(-1, $i) * pow($angle, 2 * $i) / fact(2 * $i);
  }
  @return $cos;
}

@function tan($angle) {
  @return sin($angle) / cos($angle);
}
{% endhighlight %}

看看效果如何，杠杠大！
{% highlight scss %}
@debug sin(pi()/4); // => 0.70711
@debug cos(45deg);  // => 0.70711
{% endhighlight %}
Yeah! Give me five!

有了以上利器，我刚才说的在Sass中写等边三角形，简直就易如反掌了啊！
{% highlight scss %}
@mixin clip-path($clip) {
  -webkit-clip-path: $clip;
  -moz-clip-path: $clip;
  -ms-clip-path: $clip;
  clip-path: $clip;
}

@mixin equ-triangle($height){
  $h: $height;
  $w: tan(30deg) * 2 * $h;
  width: $w;
  height: $h;
  @include clip-path(polygon($w/2 0, $w $h, 0 $h));
}

.my-triangle {
  @include equ-triangle(100px);
  background: #f00;
}
{% endhighlight %}
编译出来的CSS代码如下：
{% highlight css %}
.my-triangle{
  width:115.47005px;
  height:100px;
  background:#f00;
  -webkit-clip-path:polygon(57.73503px 0, 115.47005px 100px, 0 100px);
     -moz-clip-path:polygon(57.73503px 0, 115.47005px 100px, 0 100px);
      -ms-clip-path:polygon(57.73503px 0, 115.47005px 100px, 0 100px);
          clip-path:polygon(57.73503px 0, 115.47005px 100px, 0 100px);
}
{% endhighlight %}

<div class="my-triangle"></div>

啥，你又看不到？放着高大上的Chrome不用，那怪谁？